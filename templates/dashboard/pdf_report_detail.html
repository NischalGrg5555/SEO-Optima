{% extends 'dashboard/base.html' %}
{% load static %}

{% block title %}Regenerate Report - SEO Optima{% endblock %}

{% block content %}
<div class="container-fluid mt-5">
    <div class="row">
        <div class="col-md-8 offset-md-2">
            <h1 class="mb-4">Regenerate Report</h1>
            
            <div class="alert alert-info">
                <h6>Regenerating: <strong>{{ report.title }}</strong></h6>
                <p class="mb-0">This will create a new version of your report with the latest data.</p>
            </div>

            <form method="post">
                {% csrf_token %}

                <div class="card mb-4">
                    <div class="card-body">
                        <h5 class="card-title">Report Configuration</h5>
                        
                        <div class="form-group mb-3">
                            <label for="report-title" class="form-label fw-bold">Report Title</label>
                            <input type="text" class="form-control" id="report-title" name="title" 
                                   value="{{ report.title }}">
                        </div>

                        <div class="form-group mb-3">
                            <label for="report-description" class="form-label fw-bold">Description (Optional)</label>
                            <textarea class="form-control" id="report-description" name="description" 
                                      rows="3">{{ report.description }}</textarea>
                        </div>

                        <div class="mb-3">
                            <strong>Report Type:</strong>
                            <p>
                                {% if report.report_type == 'free' %}
                                <span class="badge bg-success">Basic Report (Free)</span>
                                {% else %}
                                <span class="badge bg-info">Premium Report</span>
                                {% endif %}
                            </p>
                        </div>
                    </div>
                </div>

                <div class="card bg-light">
                    <div class="card-body">
                        <h6 class="card-title mb-3">Report Options</h6>
                        
                        <div class="form-check mb-2">
                            <input class="form-check-input" type="checkbox" id="include-charts" 
                                   name="include_charts" {% if report.include_charts %}checked{% endif %}>
                            <label class="form-check-label" for="include-charts">
                                Include Charts & Graphs
                            </label>
                        </div>
                        
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="include-recommendations" 
                                   name="include_recommendations" {% if report.include_recommendations %}checked{% endif %}>
                            <label class="form-check-label" for="include-recommendations">
                                Include Recommendations
                            </label>
                        </div>
                    </div>
                </div>

                <div class="mt-4">
                    <button type="submit" class="btn btn-primary btn-lg">
                        <i class="bi bi-arrow-repeat"></i> Regenerate Report
                    </button>
                    <a href="{% url 'dashboard:pdf_report_detail' report.pk %}" class="btn btn-secondary btn-lg">
                        Cancel
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
